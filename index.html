
<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Evento BCC - Stelle Oro</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: radial-gradient(circle at top, #e0f4ff, #f2f2f2 55%, #e8f5e9);
  display:flex; justify-content:center; padding-top:40px;
}

/* CARD CON BORDO ORO */
.container {
  background:white; padding:30px; border-radius:20px;
  border:4px solid gold;
  box-shadow:0 0 25px rgba(255,215,0,0.6);
  width:520px;
}

.logo { display:block; max-width:260px; margin:0 auto 12px; }
h1 { text-align:center; color:#004f71; margin-bottom:20px; }

.field { margin-bottom:14px; }
label { font-weight:600; margin-bottom:4px; display:block; }

input[type=text] {
  width:100%; padding:10px; border-radius:6px; border:1px solid #ccc;
}

#assignBtn {
  width:100%; padding:12px; border:none; border-radius:999px;
  background:linear-gradient(90deg,#009739,#006699);
  color:white; font-weight:bold; cursor:pointer;
}

/* RISULTATO */
.result { margin-top:18px; text-align:center; font-size:18px; color:#004f71; }
.result .welcome { font-size:18px; display:block; }
.result .table-label { margin-top:4px; display:block; }

.result .table-number {
  font-size:40px; background:linear-gradient(120deg,#009739,#006699);
  color:white; padding:10px 22px; border-radius:999px; display:inline-block;
  margin-top:6px; position:relative; z-index:2;
}

/* GLOW DIETRO NUMERO */
.result .table-number::before {
  content:"";
  position:absolute;
  top:-12px; left:-12px; right:-12px; bottom:-12px;
  background: radial-gradient(circle, rgba(255,223,0,0.55), rgba(255,223,0,0));
  border-radius:50%;
  filter: blur(12px);
  animation: glowPulse 2.4s infinite ease-in-out;
  z-index:-1;
}

@keyframes glowPulse {
  0% { opacity:0.3; transform:scale(0.9); }
  50% { opacity:1; transform:scale(1.15); }
  100% { opacity:0.3; transform:scale(0.9); }
}

/* NEVE A STELLA ORO */
#snow-container {
  position:fixed; top:0; left:0; width:100%; height:100%;
  pointer-events:none; z-index:999;
}

.snowflake {
  position:absolute;
  font-size:38px;
  color:#FFD700;
  text-shadow:
     0 0 12px #FFD700,
     0 0 26px #FFD700,
     0 0 40px rgba(255,215,0,0.9),
     0 0 55px rgba(255,215,0,0.9);
  animation:snowFall 10s linear forwards;
  opacity:0.98;
}

@keyframes snowFall {
  0% { transform: translateY(-150px) rotate(0deg) scale(1); opacity:1; }
  100% { transform: translateY(130vh) rotate(360deg) scale(1.6); opacity:0; }
}
</style>
</head>

<body>

<div id="snow-container"></div>

<div class="container">
  <img src="logo.jpg" class="logo">
  <h1>Benvenuto all'evento BCC Magna Grecia</h1>

  <div id="result" class="result"></div>

  <div class="field">
    <label>Nome</label>
    <input id="nameInput" type="text">
  </div>

  <div class="field">
    <label>Ufficio / Filiale</label>
    <input id="officeInput" type="text">
  </div>

  <button id="assignBtn">Scopri il tuo tavolo</button>

  <audio id="bellSound" src="https://raw.githubusercontent.com/oadesso-lab/oadesso-lab.github.io/main/campane.mp3" preload="auto"></audio>
</div>

<script>
const TABLE_COUNT = 10;
const TABLE_CAPACITY = 8;
const tables = Array.from({length:TABLE_COUNT},(_,i)=>({id:i+1, used:0}));

const result = document.getElementById("result");
const nameInput = document.getElementById("nameInput");
const officeInput = document.getElementById("officeInput");
const bellSound = document.getElementById("bellSound");
const snowContainer = document.getElementById("snow-container");

function allFull(){ return tables.every(t => t.used >= TABLE_CAPACITY); }

function playBell(){ try { bellSound.volume=1; bellSound.currentTime=0; bellSound.play(); } catch(e){} }

function launchSnow(){
  for(let i=0;i<60;i++){
    const s=document.createElement("div");
    s.classList.add("snowflake");
    s.textContent = "✧";   // STELLA ORO
    s.style.left = Math.random()*100 + "vw";
    s.style.animationDelay = (Math.random()*3) + "s";
    s.style.fontSize = (34 + Math.random()*20) + "px";
    snowContainer.appendChild(s);
    setTimeout(()=>s.remove(),11000);
  }
}

document.getElementById("assignBtn").onclick = ()=>{
  const name=nameInput.value.trim();
  const office=officeInput.value.trim();

  if(!name || !office){
    result.textContent="Inserisci Nome e Ufficio/Filiale.";
    return;
  }

  if(allFull()){
    result.textContent="Tutti i tavoli sono pieni (80 posti).";
    return;
  }

  const avail = tables.filter(t => t.used < TABLE_CAPACITY);
  const chosen = avail[Math.floor(Math.random()*avail.length)];
  chosen.used++;

  result.innerHTML =
    "<span class='welcome'><strong>"+name+
    "</strong> ("+office+")</span>" +
    "<span class='table-label'>Il tuo tavolo è il</span>" +
    "<span class='table-number'>"+chosen.id+"</span>";

  playBell();
  launchSnow();

  nameInput.value="";
  officeInput.value="";
  nameInput.focus();
};
</script>

</body>
</html>
